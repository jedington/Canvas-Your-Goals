@using Step = MSSA.Canvas_Your_Goals.Models.Step
@model MSSA.Canvas_Your_Goals.Models.Task

@{
    ViewData["Title"] = "Task Details";
}

<div class="flex-row justify-content-center">
    <fieldset class="flex-div shadow">
        <legend> @ViewData["Title"] </legend>
        <table class="table-bordered table-striped table-sm">
            <tbody>
                <tr>
                    <th> Goal Name: </th>
                    <td> @Model.TaskName </td>
                </tr>
                <tr>
                    <th> Task Order: </th>
                    <td> @Model.TaskOrder </td>
                </tr>
                <tr>
                    <th> Status: </th>
                    <td> @Model.Status </td>
                </tr>
                <tr>
                    <th> Start Date: </th>
                    <td> @Model.StartDate.ToString("MM/dd/yyyy") </td>
                </tr>
                <tr>
                    <th> End Date: </th>
                    <td> @Model.EndDate?.ToString("MM/dd/yyyy") </td>
                </tr>
                <tr>
                    <th> Details: </th>
                    <td> @Model.Details </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td class="text-center" colspan="2">
                        <a class="btn btn-info ml-1 mr-1" asp-controller="Goal" asp-action="Details" asp-route-goalId="@Model.GoalId">
                            Back
                        </a>
                        <a class="btn btn-warning ml-1 mr-1" asp-controller="Task" asp-action="Edit" asp-route-taskId="@Model.TaskId">
                            Edit
                        </a>
                        <a class="btn btn-danger ml-1 mr-1" asp-controller="Task" asp-action="Delete" asp-route-taskId="@Model.TaskId">
                            Delete
                        </a>
                    </td>
                </tr>
            </tfoot>
        </table>
    </fieldset>

    <fieldset class="flex-div shadow">
        <legend> Tasks for: @Model.TaskName </legend>
        <table class="table-bordered table-striped table-sm">
            <thead>
                <tr>
                    <th class="pr-1 text-center"> Step </th>
                    <th class="pr-1 text-center"> Order </th>
                    <th class="pr-1 text-center"> Status </th>
                    <th class="pr-1 text-center"> Start Date </th>
                    <th class="pr-1 text-center"> End Date </th>
                    <th class="pr-1 text-center"> Details </th>
                </tr>
            </thead>
            <tbody>
                @foreach (Step step in Model.Steps)
                {
                    <tr>
                        <td class="pr-1 text-center"> @step.StepName </td>
                        <td class="pr-1 text-center"> @step.StepOrder </td>
                        <td class="pr-1 text-center"> @step.Status </td>
                        <td class="pr-1 text-center"> @step.StartDate.ToString("MM/dd/yyyy") </td>
                        <td class="pr-1 text-center"> @step.EndDate?.ToString("MM/dd/yyyy") </td>
                        <td class="pr-1 text-center">
                            <a asp-controller="Step" asp-action="Details" asp-route-stepId="@step.StepId" class="btn btn-sm btn-outline-info ml-1 mr-1">
                                View
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="6">
                        <a asp-controller="Step" asp-action="Add" asp-route-taskId="@Model.TaskId" class="btn btn-outline-info ml-1 mr-1">Create New Step! </a>
                        @*
                            <span
                                page-model="@Model.PagingInfo"
                                page-action="Index"
                                page-class-enabled="true"
                                page-class="btn"
                                page-class-normal="btn-outline-dark"
                                page-class-selected="btn-primary"
                                class="btn-group m-1 float-right">
                            </span>
                        *@
                    </td>
                </tr>
            </tfoot>
        </table>
    </fieldset>
</div>